{"version":3,"sources":["chartist-plugin-range.js"],"names":["root","factory","define","amd","returnExportsGlobal","exports","module","this","window","document","Chartist","hide","rect","attr","style","show","transformRect","rectAttr","chartRect","y","y2","height","querySelectorAll","handle_y","x","x1","width","rectLeftAttr","x2","y1","rectRightAttr","getRect","firstPoint","secondPoint","position","event","svg","transform","clientX","clientY","svgElement","tagName","ownerSVGElement","matrix","getScreenCTM","point","createSVGPoint","matrixTransform","inverse","project","value","axis","bounds","max","min","scale","type","base","Math","pow","baseLog","axisLength","range","pct","stepLength","floor","start_tick","start_date","Number","Date","ticks","end_tick","length","end_date","date_pct","val","log","defaultOptions","plugins","options","extend","chart","copyTouch","touch","p","id","identifier","ongoingTouchIndexById","idToFind","i","ongoingTouches","onTouchStart","touches","changedTouches","push","onTouchMove","idx","splice","preventDefault","onTouchCancel","removeTouches","onTouchEnd","rangeIn","onMouseDown","button","downPosition","onMouseUp","box","resetOnRightMouseBtn","reset","selectedRange","low","axisX","high","onRange","onMouseMove","Line","axisY","on","data","element","clip-path","_node","elem","rectBox","append","rectLeft","rectRight","rectHandleLeft","d","rectHandleRight","rectLineLeft","rectLineRight","defs","querySelector","fill","addEventListener"],"mappings":"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","file":"chartist-plugin-range.min.js","sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], function () {\n      return (root.returnExportsGlobal = factory());\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    root['Chartist.plugins.range'] = factory();\n  }\n}(this, function () {\n\n  /**\n   * Chartist.js range plugin.\n   *\n   */\n  (function (window, document, Chartist) {\n    'use strict';\n\n    var defaultOptions = {\n      // onRange\n    };\n\n\n    Chartist.plugins = Chartist.plugins || {};\n    Chartist.plugins.range = function (options) {\n\n      options = Chartist.extend({}, defaultOptions, options);\n\n      return function range(chart) {\n\n        if (!(chart instanceof Chartist.Line)) {\n          return;\n        }\n\n        var rect, svg, axisX, axisY, chartRect;\n        var downPosition;\n        var onRange = options.onRange;\n        var ongoingTouches = [];\n\n        chart.on('draw', function (data) {\n          var type = data.type;\n          if (type === 'line' || type === 'bar' || type === 'area' || type === 'point') {\n            data.element.attr({\n              'clip-path': 'url(#range-mask)'\n            });\n          }\n        });\n\n        chart.on('created', function (data) {\n          axisX = data.axisX;\n          axisY = data.axisY;\n          chartRect = data.chartRect;\n          svg = data.svg._node;\n          rect = data.svg.elem('g', {}, 'ct-range-rect');\n          var rectBox = data.svg.elem('rect', {width: '100', height: '100', x:0, y:0}, 'ct-range-rect-box');\n          rect.append(rectBox);\n\n\n          var rectLeft = data.svg.elem('rect', {width: '100', height: '100', x:0, y:0}, 'ct-range-rect-left');\n          var rectRight = data.svg.elem('rect', {width: '100', height: '100', x:0, y:0}, 'ct-range-rect-right');\n\n          rect.append(rectLeft);\n          rect.append(rectRight);\n\n          var rectHandleLeft = data.svg.elem('path', {d: 'M-0.5,86.66666666666667A6,6 0 0 0 -6.5,92.66666666666667V167.33333333333334A6,6 0 0 0 -0.5,173.33333333333334ZM-2.5,94.66666666666667V165.33333333333334M-4.5,94.66666666666667V165.33333333333334'}, 'ct-range-rect-handle-left');\n          var rectHandleRight = data.svg.elem('path', {d: 'M0.5,86.66666666666667A6,6 0 0 1 6.5,92.66666666666667V167.33333333333334A6,6 0 0 1 0.5,173.33333333333334ZM2.5,94.66666666666667V165.33333333333334M4.5,94.66666666666667V165.33333333333334'}, 'ct-range-rect-handle-right');\n          rect.append(rectHandleLeft);\n          rect.append(rectHandleRight);\n\n          var rectLineLeft = data.svg.elem('line', {height: '100', x:0, y:0}, 'ct-range-rect-left-line');\n          var rectLineRight = data.svg.elem('line', {height: '100', x:0, y:0}, 'ct-range-rect-right-line');\n\n          rect.append(rectLineLeft);\n          rect.append(rectLineRight);\n\n          hide(rect);\n\n          var defs = data.svg.querySelector('defs') || data.svg.elem('defs');\n          var width = chartRect.width();\n          var height = chartRect.height();\n\n          defs\n            .elem('clipPath', {\n              id: 'range-mask'\n            })\n            .elem('rect', {\n              x: chartRect.x1,\n              y: chartRect.y2,\n              width: width,\n              height: height,\n              fill: 'white'\n            });\n\n          svg.addEventListener('mousedown', onMouseDown);\n          svg.addEventListener('mouseup', onMouseUp);\n          svg.addEventListener('mousemove', onMouseMove);\n          svg.addEventListener('touchstart', onTouchStart);\n          svg.addEventListener('touchmove', onTouchMove);\n          svg.addEventListener('touchend', onTouchEnd);\n          svg.addEventListener('touchcancel', onTouchCancel);\n        });\n\n        function copyTouch(touch) {\n          var p = position(touch, svg);\n          p.id = touch.identifier; \n          return p;\n        }\n\n        function ongoingTouchIndexById(idToFind) {\n          for (var i = 0; i < ongoingTouches.length; i++) {\n            var id = ongoingTouches[i].id;\n            if (id === idToFind) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function onTouchStart(event) {\n          var touches = event.changedTouches;\n          for (var i = 0; i < touches.length; i++) {\n            ongoingTouches.push(copyTouch(touches[i]));\n          }        \n\n          if (ongoingTouches.length > 1) {\n            //rectBox.attr(getRect(ongoingTouches[0], ongoingTouches[1]));\n            show(rect);\n          }\n        }\n\n        function onTouchMove(event) {\n          var touches = event.changedTouches;        \n          for (var i = 0; i < touches.length; i++) {\n            var idx = ongoingTouchIndexById(touches[i].identifier);\n            ongoingTouches.splice(idx, 1, copyTouch(touches[i]));\n          }\n\n          if (ongoingTouches.length > 1) {\n            //rectBox.attr(getRect(ongoingTouches[0], ongoingTouches[1]));\n            show(rect);\n            event.preventDefault();\n          }\n        }\n\n        function onTouchCancel(event) {\n          removeTouches(event.changedTouches);\n        }\n\n        function removeTouches(touches) {\n          for (var i = 0; i < touches.length; i++) {\n            var idx = ongoingTouchIndexById(touches[i].identifier);\n            if (idx >= 0) {\n              ongoingTouches.splice(idx, 1);\n            } \n          }\n        }\n\n        function onTouchEnd(event) {\n          if (ongoingTouches.length > 1) {\n            rangeIn(getRect(ongoingTouches[0], ongoingTouches[1]));\n          }\n          removeTouches(event.changedTouches);\n          hide(rect);\n        }\n\n        function onMouseDown(event) {\n          hide(rect);\n          if (event.button === 0) {\n            downPosition = position(event, svg);\n            downPosition.y = 0;\n            var rectAttr = getRect(downPosition, downPosition);\n\n            transformRect(rectAttr, rect, chartRect);\n            event.preventDefault();\n          }\n        }\n\n        var reset = function () {\n          chart.options.selectedRange = null;\n          onRange && onRange(chart);\n        };\n\n        function onMouseUp(event) {\n          if (event.button === 0 && downPosition) {\n            var box = getRect(downPosition, position(event, svg));\n            rangeIn(box);          \n            downPosition = null;\n            //hide(rect);\n            event.preventDefault();\n          }\n          else if (options.resetOnRightMouseBtn && event.button === 2) {\n            reset();\n            event.preventDefault();\n          }\n        }\n\n        function rangeIn(rect) {\n          if (rect.width > 5 && rect.height > 5) {\n              var x1 = rect.x - chartRect.x1;\n              var x2 = x1 + rect.width;\n\n              chart.options.selectedRange = { low: project(x1, axisX), high: project(x2, axisX) };\n\n              //chart.update(chart.data, chart.options);\n              onRange && onRange(chart);\n            }else{\n              reset();\n            }\n        }\n\n        function onMouseMove(event) {\n          if (downPosition) {\n            var point = position(event, svg);\n            var rectAttr = getRect(downPosition, point);\n            transformRect(rectAttr, rect, chartRect);\n            if (rect.width() > 5) {\n              show(rect);\n            }\n            event.preventDefault();\n          }\n        }\n      };\n\n    };\n\n    function hide(rect) {\n      rect.attr({ style: 'display:none' });\n    }\n\n    function show(rect) {\n      rect.attr({ style: 'display:block' });\n    }\n\n    function transformRect(rectAttr, rect, chartRect){\n        rectAttr.y = chartRect.y2;\n        rectAttr.height = chartRect.height();\n        rect.querySelectorAll('.ct-range-rect-box').attr(rectAttr);\n        var handle_y = ((((rectAttr.height)-86)/2)-86) + chartRect.y2;\n        rect.querySelectorAll('.ct-range-rect-handle-left').attr({'style':'transform:translate('+ (rectAttr.x > chartRect.x1 ? rectAttr.x : chartRect.x1)+'px, '+ handle_y +'px)'});\n        rect.querySelectorAll('.ct-range-rect-handle-right').attr({'style':'transform:translate('+(rectAttr.x + rectAttr.width)+'px, '+ handle_y +'px)'});\n\n        var rectLeftAttr = {\n          x: rectAttr.x,\n          y: chartRect.y2,\n          width: rectAttr.width,\n          height: rectAttr.height,\n      };\n      rectLeftAttr.width = rectAttr.x - chartRect.x1 > 0 ? rectAttr.x - chartRect.x1 : 0;\n      rectLeftAttr.x = chartRect.x1;\n      rect.querySelectorAll('.ct-range-rect-left').attr(rectLeftAttr);\n\n\n      rect.querySelectorAll('.ct-range-rect-left-line').attr({\n          x1: rectLeftAttr.x + rectLeftAttr.width,\n          x2: rectLeftAttr.x + rectLeftAttr.width,\n          y1: rectLeftAttr.y,\n          y2: rectLeftAttr.y + rectLeftAttr.height\n      });\n\n      var rectRightAttr = {\n          x: rectAttr.x,\n          y: chartRect.y2,\n          width: rectAttr.width,\n          height: rectAttr.height,\n      };\n      rectRightAttr.x = rectAttr.x + rectAttr.width;\n      rectRightAttr.width = chartRect.x2 - (rectAttr.x + rectAttr.width) > 0 ? chartRect.x2 - (rectAttr.x + rectAttr.width) : 0;\n      rect.querySelectorAll('.ct-range-rect-right').attr(rectRightAttr);\n\n\n      rect.querySelectorAll('.ct-range-rect-right-line').attr({\n          x1: rectRightAttr.x,\n          x2: rectRightAttr.x,\n          y1: rectRightAttr.y,\n          y2: rectRightAttr.y + rectRightAttr.height\n      });\n\n\n\n    }\n\n    function getRect(firstPoint, secondPoint) {\n      var x = firstPoint.x;\n      var y = firstPoint.y;\n      var width = secondPoint.x - x;\n      var height = secondPoint.y - y;\n      if (width < 0) {\n        width = -width;\n        x = secondPoint.x;\n      }\n      if (height < 0) {\n        height = -height;\n        y = secondPoint.y;\n      }\n      y = 50;//this.options.chartPadding.top;\n      height = 370;\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    }\n\n    function position(event, svg) {\n      return transform(event.clientX, event.clientY, svg);\n    }\n\n    function transform(x, y, svgElement) {\n      var svg = svgElement.tagName === 'svg' ? svgElement : svgElement.ownerSVGElement;\n      var matrix = svg.getScreenCTM();\n      var point = svg.createSVGPoint();\n      point.x = x;\n      point.y = y;\n      point = point.matrixTransform(matrix.inverse());\n      return point || { x: 0, y: 0 };\n    }\n\n    function project(value, axis) {\n        if (axis.bounds){\n      var max = axis.bounds.max;\n      var min = axis.bounds.min;\n      if (axis.scale && axis.scale.type === 'log') {\n        var base = axis.scale.base;\n        return Math.pow(base,\n          value * baseLog(max / min, base) / axis.axisLength) * min;\n      }\n      return (value * axis.bounds.range / axis.axisLength) + min;\n      }else{\n\n          //var unix_day = 86400000;\n          var pct = (value / axis.stepLength) - Math.floor(value / axis.stepLength);\n\n          var start_tick = Math.floor(value / axis.stepLength);\n          var start_date = Number(new Date(axis.ticks[start_tick]));\n          var end_tick = start_tick + 1;\n          if (end_tick < axis.ticks.length){\n              var end_date = Number(new Date(axis.ticks[Math.floor(value / axis.stepLength) + 1])); \n              var date_pct = start_date + ((end_date - start_date) * pct);\n              return new Date(date_pct); //axis.ticks[tick];\n          }else{\n              return new Date(start_date);            \n          }\n      }\n    }\n\n    function baseLog(val, base) {\n      return Math.log(val) / Math.log(base);\n    }\n\n  } (window, document, Chartist));\n  return Chartist.plugins.range;\n\n}));\n"]}