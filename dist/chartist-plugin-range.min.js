!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a["Chartist.plugins.range"]=b()}(this,function(){return function(a,b,c){"use strict";function d(a){a.attr({style:"display:none"})}function e(a){a.attr({style:"display:block"})}function f(a,b,c){a.y=c.y2,a.height=c.height(),b.querySelectorAll(".ct-range-rect-box").attr(a);var d=(a.height-86)/2-86+c.y2;b.querySelectorAll(".ct-range-rect-handle-left").attr({style:"transform:translate("+(a.x>c.x1?a.x:c.x1)+"px, "+d+"px)"}),b.querySelectorAll(".ct-range-rect-handle-right").attr({style:"transform:translate("+(a.x+a.width)+"px, "+d+"px)"});var e={x:a.x,y:c.y2,width:a.width,height:a.height};e.width=a.x-c.x1>0?a.x-c.x1:0,e.x=c.x1,b.querySelectorAll(".ct-range-rect-left").attr(e),b.querySelectorAll(".ct-range-rect-left-line").attr({x1:e.x+e.width,x2:e.x+e.width,y1:e.y,y2:e.y+e.height});var f={x:a.x,y:c.y2,width:a.width,height:a.height};f.x=a.x+a.width,f.width=c.x2-(a.x+a.width)>0?c.x2-(a.x+a.width):0,b.querySelectorAll(".ct-range-rect-right").attr(f),b.querySelectorAll(".ct-range-rect-right-line").attr({x1:f.x,x2:f.x,y1:f.y,y2:f.y+f.height})}function g(a,b){var c=a.x,d=a.y,e=b.x-c,f=b.y-d;return 0>e&&(e=-e,c=b.x),0>f&&(f=-f,d=b.y),d=50,f=370,{x:c,y:d,width:e,height:f}}function h(a,b){return i(a.clientX,a.clientY,b)}function i(a,b,c){var d="svg"===c.tagName?c:c.ownerSVGElement,e=d.getScreenCTM(),f=d.createSVGPoint();return f.x=a,f.y=b,f=f.matrixTransform(e.inverse()),f||{x:0,y:0}}function j(a,b){if(b.bounds){var c=b.bounds.max,d=b.bounds.min;if(b.scale&&"log"===b.scale.type){var e=b.scale.base;return Math.pow(e,a*k(c/d,e)/b.axisLength)*d}return a*b.bounds.range/b.axisLength+d}var f=a/b.stepLength-Math.floor(a/b.stepLength),g=Math.floor(a/b.stepLength),h=Number(new Date(b.ticks[g])),i=g+1;if(i<b.ticks.length){var j=Number(new Date(b.ticks[Math.floor(a/b.stepLength)+1]));console.log(h,j);var l=h+(j-h)*f;return new Date(l)}return new Date(h)}function k(a,b){return Math.log(a)/Math.log(b)}var l={};c.plugins=c.plugins||{},c.plugins.range=function(a){return a=c.extend({},l,a),function(b){function i(a){var b=h(a,v);return b.id=a.identifier,b}function k(a){for(var b=0;b<B.length;b++){var c=B[b].id;if(c===a)return b}return-1}function l(a){for(var b=a.changedTouches,c=0;c<b.length;c++)B.push(i(b[c]));B.length>1&&e(u)}function m(a){for(var b=a.changedTouches,c=0;c<b.length;c++){var d=k(b[c].identifier);B.splice(d,1,i(b[c]))}B.length>1&&(e(u),a.preventDefault())}function n(a){o(a.changedTouches)}function o(a){for(var b=0;b<a.length;b++){var c=k(a[b].identifier);c>=0&&B.splice(c,1)}}function p(a){B.length>1&&s(g(B[0],B[1])),o(a.changedTouches),d(u)}function q(a){if(d(u),0===a.button){z=h(a,v),z.y=0;var b=g(z,z);f(b,u,y),a.preventDefault()}}function r(b){if(0===b.button&&z){var c=g(z,h(b,v));s(c),z=null,b.preventDefault()}else a.resetOnRightMouseBtn&&2===b.button&&(C(),b.preventDefault())}function s(a){if(a.width>5&&a.height>5){var c=a.x-y.x1,d=c+a.width;b.options.selectedRange={low:j(c,w),high:j(d,w)},A&&A(b)}else C()}function t(a){if(z){var b=h(a,v),c=g(z,b);f(c,u,y),u.width()>5&&e(u),a.preventDefault()}}if(b instanceof c.Line){var u,v,w,x,y,z,A=a.onRange,B=[];b.on("draw",function(a){var b=a.type;"line"!==b&&"bar"!==b&&"area"!==b&&"point"!==b||a.element.attr({"clip-path":"url(#range-mask)"})}),b.on("created",function(a){w=a.axisX,x=a.axisY,y=a.chartRect,v=a.svg._node,u=a.svg.elem("g",{},"ct-range-rect");var b=a.svg.elem("rect",{width:"100",height:"100",x:0,y:0},"ct-range-rect-box");u.append(b);var c=a.svg.elem("rect",{width:"100",height:"100",x:0,y:0},"ct-range-rect-left"),e=a.svg.elem("rect",{width:"100",height:"100",x:0,y:0},"ct-range-rect-right");u.append(c),u.append(e);var f=a.svg.elem("path",{d:"M-0.5,86.66666666666667A6,6 0 0 0 -6.5,92.66666666666667V167.33333333333334A6,6 0 0 0 -0.5,173.33333333333334ZM-2.5,94.66666666666667V165.33333333333334M-4.5,94.66666666666667V165.33333333333334"},"ct-range-rect-handle-left"),g=a.svg.elem("path",{d:"M0.5,86.66666666666667A6,6 0 0 1 6.5,92.66666666666667V167.33333333333334A6,6 0 0 1 0.5,173.33333333333334ZM2.5,94.66666666666667V165.33333333333334M4.5,94.66666666666667V165.33333333333334"},"ct-range-rect-handle-right");u.append(f),u.append(g);var h=a.svg.elem("line",{height:"100",x:0,y:0},"ct-range-rect-left-line"),i=a.svg.elem("line",{height:"100",x:0,y:0},"ct-range-rect-right-line");u.append(h),u.append(i),d(u);var j=a.svg.querySelector("defs")||a.svg.elem("defs"),k=y.width(),o=y.height();j.elem("clipPath",{id:"range-mask"}).elem("rect",{x:y.x1,y:y.y2,width:k,height:o,fill:"white"}),v.addEventListener("mousedown",q),v.addEventListener("mouseup",r),v.addEventListener("mousemove",t),v.addEventListener("touchstart",l),v.addEventListener("touchmove",m),v.addEventListener("touchend",p),v.addEventListener("touchcancel",n)});var C=function(){b.options.axisX.highLow=null,b.options.axisY.highLow=null,b.update(b.data,b.options)}}}}}(window,document,Chartist),Chartist.plugins.range});
//# sourceMappingURL=chartist-plugin-range.min.js.map